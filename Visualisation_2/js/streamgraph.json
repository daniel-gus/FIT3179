{
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "width": 300, "height": 300,
    "data": {"url": "https://raw.githubusercontent.com/daniel-gus/FIT3179/master/Visualisation_2/Datasets/Employed_persons_by_occupation_and_state_1982_2020.csv"},
    "transform": [
        {"filter": "datum.State == 'JOHOR'"}
    ],
    "mark": "area",
    "selection": {
      "Occupation": {
          "type": "single",
          "fields": ["Occupation"],
          "on": "mouseover",
          "bind": "legend"
      }
    },
    "encoding": {
      "x": {
        "title": "year",
        "timeUnit": "year", "field": "Year",
        "axis": {"domain": false, "format": "%Y", "tickSize": 0, "title": null}
      },
      "y": {
        "aggregate": "sum", "field": "Person",
        "axis": null,
        "stack": "center"
      },
      "color": {
        "field":"Occupation", 
        "scale":{"scheme": "category20b"}
      },
      "opacity": {
        "condition": {"selection": "Occupation", "value": 1},
        "value": 0.15
      },
      "tooltip": [
          {"field": "Year", "timeUnit": "year", "title": "Year"},
          {"field": "Person", "aggregate": "sum", "type": "quantitative", "title": "Person"}
      ]
    }
  }